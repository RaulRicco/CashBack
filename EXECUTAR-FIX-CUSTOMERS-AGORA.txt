â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                    â•‘
â•‘     ğŸ”§ CORRIGIR ERRO 406 NO CADASTRO DE CLIENTES - URGENTE       â•‘
â•‘                                                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš¨ PROBLEMA IDENTIFICADO:
   - Erro 406 ao tentar cadastrar cliente
   - Erro 401 ao inserir na tabela customers
   - RLS (Row Level Security) bloqueando operaÃ§Ãµes

âœ… SOLUÃ‡ÃƒO: Executar SQL no Supabase

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ PASSO A PASSO (COPIAR E COLAR):

1ï¸âƒ£ Acesse o Supabase:
   https://supabase.com/dashboard/project/mtylboaluqswdkgljgsd

2ï¸âƒ£ VÃ¡ em: SQL Editor (Ã­cone de raio âš¡ no menu lateral)

3ï¸âƒ£ Clique em "+ New Query"

4ï¸âƒ£ COPIE E COLE todo o conteÃºdo do arquivo abaixo:
   FIX-CUSTOMERS-RLS.sql

5ï¸âƒ£ Clique em "RUN" (botÃ£o no canto inferior direito)

6ï¸âƒ£ Aguarde aparecer "Success. No rows returned"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ O QUE O SQL FAZ:

âœ… Remove polÃ­ticas RLS antigas que estÃ£o causando conflito
âœ… Cria novas polÃ­ticas permitindo:
   - INSERT pÃºblico (para signup de clientes)
   - SELECT pÃºblico (para buscar clientes)
   - UPDATE pÃºblico (para atualizar saldo)
âœ… Habilita RLS com as polÃ­ticas corretas

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš¡ ALTERNATIVA RÃPIDA (Se o SQL nÃ£o resolver):

Se preferir desabilitar RLS temporariamente para testar:

1ï¸âƒ£ No SQL Editor do Supabase, execute:

   ALTER TABLE customers DISABLE ROW LEVEL SECURITY;

2ï¸âƒ£ Teste o cadastro

3ï¸âƒ£ Se funcionar, entÃ£o o problema Ã© RLS mesmo

âš ï¸  ATENÃ‡ÃƒO: Desabilitar RLS remove a seguranÃ§a da tabela.
    Use apenas para TESTAR. Depois habilite novamente com o SQL correto.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” VERIFICAR SE FUNCIONOU:

ApÃ³s executar o SQL:

1. Tente cadastrar um cliente novamente
2. O erro 406 deve desaparecer
3. O cadastro deve funcionar normalmente

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ ARQUIVOS:

ğŸ“„ FIX-CUSTOMERS-RLS.sql         â† Execute ESTE arquivo no Supabase
ğŸ“„ EXECUTAR-FIX-CUSTOMERS-AGORA.txt â† VocÃª estÃ¡ lendo este arquivo

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¡ ME AVISE DEPOIS:

Depois de executar, me diga:
âœ… "Funcionou! Cliente cadastrou com sucesso"
âŒ "Ainda dÃ¡ erro 406" (e me envie o novo erro do console)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
