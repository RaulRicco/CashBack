#!/bin/bash

TOKEN=$(grep github.com ~/.git-credentials | sed 's/.*:\/\/.*:\(.*\)@.*/\1/')

curl -X PATCH \
  -H "Authorization: token $TOKEN" \
  -H "Accept: application/vnd.github.v3+json" \
  https://api.github.com/repos/RaulRicco/CashBack/pulls/1 \
  -d '{
    "body": "## ğŸ‰ MudanÃ§as Implementadas\n\n### âœ… Upload de Logo Funcionando\n- Corrigido erro de RLS no Supabase Storage\n- Bucket `merchant-assets` configurado como pÃºblico\n- Upload de logo testado e funcionando perfeitamente\n- ValidaÃ§Ã£o de tipo de arquivo (PNG, JPG) e tamanho (mÃ¡ximo 2MB)\n\n### âœ… Melhorias de Interface\n- Menu renomeado: **White Label** â†’ **Meu CashBack** âœ¨\n- Layout da Ã¡rea de upload **completamente redesenhado** e alinhado ğŸ¨\n- Preview de logo centralizado e mais intuitivo\n- Ãcone de upload em cÃ­rculo colorido\n- Background cinza suave para melhor contraste\n- Texto \"Selecionar Logo\" mais destacado e visÃ­vel\n- Elementos perfeitamente centralizados\n- Status de upload destacado com feedback visual\n\n### âœ… PÃ¡gina de ConfiguraÃ§Ãµes White Label\n- Upload e preview de logo\n- ConfiguraÃ§Ã£o de 3 cores (primÃ¡ria, secundÃ¡ria, destaque)\n- Preview das cores em botÃµes de exemplo\n- ConfiguraÃ§Ã£o de porcentagem de cashback\n- InformaÃ§Ãµes do estabelecimento (nome, email, telefone)\n- Salvamento automÃ¡tico no banco de dados\n\n### ğŸ“‹ Arquivos Modificados\n- `src/components/DashboardLayout.jsx` - Nome do menu atualizado\n- `src/pages/WhiteLabelSettings.jsx` - Layout melhorado, alinhado e funcional\n- Scripts SQL de diagnÃ³stico e correÃ§Ã£o criados\n\n### ğŸ”§ ConfiguraÃ§Ãµes TÃ©cnicas\n- Bucket Supabase Storage configurado\n- PolÃ­ticas RLS ajustadas\n- IntegraÃ§Ã£o com Supabase Storage completa\n\n### ğŸ¯ PrÃ³ximos Passos (Futuras PRs)\n1. Aplicar branding dinÃ¢mico sistema-wide\n2. Completar isolamento multi-tenant\n3. Aplicar cores personalizadas em todo o sistema\n4. Mostrar logo do merchant em pÃ¡ginas customer-facing\n\n### âœ… Testado\n- âœ… Upload de logo funciona\n- âœ… Preview de logo funciona\n- âœ… Salvamento de configuraÃ§Ãµes funciona\n- âœ… Interface responsiva e **perfeitamente alinhada**\n- âœ… Menu lateral mostra \"Meu CashBack\" corretamente\n\n### ğŸ“ Commits\n- `507576b` - fix(ui): alterar White Label para Meu CashBack e melhorar layout\n- `3547610` - fix(storage): corrigir upload de logo tornando bucket pÃºblico\n- `1838aba` - fix(ui): melhorar alinhamento da Ã¡rea de upload de logo\n\n---\n\n**Review**: Pronto para merge! ğŸš€\n\n**Total de commits:** 3\n**Arquivos alterados:** 13"
  }'
